# ูุตุจ ุฎูุฏฺฉุงุฑ Passwall2 ู AmneziaWG ุจุฑ ุฑู OpenWrt

ุงู ูพุฑูฺู ฺฉ ุงุณฺฉุฑูพุช ุณุงุฏู ุจุฑุง ูุตุจ ุงุจุฒุงุฑูุง **Passwall2** ู **AmneziaWG** ุฑู ุณุณุชูโุนุงูู OpenWrt ุงุณุช.

โ๏ธ **ูฺฉุชู ููู**: ุงู ุงุณฺฉุฑูพุช ุจุฑุง ุฑูุชุฑูุง ุทุฑุงุญ ุดุฏู ฺฉู OpenWrt ูุณุฎู `24.10.3` ุฑู ุขูโูุง ูุตุจ ุดุฏู ุงุณุช. ุงฺฏุฑ ูุณุฎู ูุฏูโุชุฑ ุฏุงุฑุฏุ ุงุจุชุฏุง ุฑูุชุฑ ุฎูุฏ ุฑุง ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

---

## ูพุดโูุงุฒูุง

* ุฑูุชุฑ ุดูุง ุจุงุฏ **OpenWrt 24.10.3** ุฏุงุดุชู ุจุงุดุฏ.
  (ุจุฑุง ฺฺฉ ฺฉุฑุฏู: ุฏุณุชูุฑ ุฒุฑ ุฑุง ุฏุฑ ุชุฑููุงู ุฑูุชุฑ ุงุฌุฑุง ฺฉูุฏ:)

  ```sh
  cat /etc/openwrt_release
  ```
* ุฏุณุชุฑุณ ุฑูุชุฑ ุจู ุงูุชุฑูุช.
* ุฏุณุชุฑุณ SSH ุจู ุฑูุชุฑ.

๐ ุงฺฏุฑ ุฑูุชุฑ ุดูุง ุงุฒ ูุณุฎู ูุฏู OpenWRT ุงุณุชูุงุฏู ูฺฉูุฏ ุ ุงุฒ **[Firmware Selector OpenWrt](https://firmware-selector.openwrt.org/)** ุจุฑุง ุจูโุฑูุฒุฑุณุงู ุงุณุชูุงุฏู ฺฉูุฏ.
ุจุณุชูโูุง ุฒุฑ ุฑุง ูุงููุฏ ุชุตูุฑ ุฒุฑ ุฏุฑ ุงูุชูุง ุจุณุชู ูุง ูุณุช ุดุฏู ุฏุฑ installed packages ูุงุฑุฏ ฺฉูุฏ :
```
coreutils coreutils-base64 coreutils-nohup curl ip-full kmod-inet-diag kmod-netlink-diag kmod-nft-socket kmod-nft-tproxy libc libuci-lua lua luci-compat luci-lib-jsonc luci-lua-runtime resolveip unzip wget-ssl kmod-tun dnsmasq-full
```

> [!CAUTION]
> ูุดุฏุงุฑ ! ุจุณุชู dnsmasq ุฑุง ุฌูุช ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู ุจุง ุจุณุชู dnsmasq-full ุงุฒ ูุณุช ุจุณุชู ูุง ูุตุจ ูุงููุฏ ุชุตูุฑ ุฒุฑ ุญุฐู ฺฉูุฏ


> [!TIP]
> ูพุดููุงุฏ ูุดูุฏ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู ุข ูพ ุฏุฑ ุดุจฺฉู ุฑูุฌ ูพุดูุฑุถ ฑ.ฑ ุฑุง ุจุง ุฏุณุชูุฑุงุช ุงูุฌุงู ุดุฏู ูุทุงุจู ุจุง ุชุตูุฑ ุฒุฑ ุงูุฌุงู ุฏูุฏ.
> ```sh
> uci set network.lan.ipaddr='192.168.103.1'
> uci commit network
> ```


<img width="1060" height="919" alt="image" src="https://github.com/user-attachments/assets/ce880844-5d9a-48e4-815c-c6cd01490ec7" />


---

## ูุญูู ุงุณุชูุงุฏู ุงุฒ ุจุฑูุงูู

### ฑ. ุฏุงูููุฏ ุงุณฺฉุฑูพุช

```sh
cd /tmp/
wget -O install.sh https://https://github.com/iranopenwrt/auto/releases/latest/download/install.sh
chmod +x install.sh
```

### ฒ. ุงุฌุฑุง ุงุณฺฉุฑูพุช

```sh
./install.sh
```

* ุงุจุชุฏุง ฺฺฉโูุง ูพุดโูุงุฒ (ุงูุชุฑูุชุ DNSุ ุงุชุตุงู ุจู GitHub) ุงูุฌุงู ูโุดูุฏ. ุฏุฑ ุตูุฑุช ููุงุฌู ุดุฏู ุจุง ุฎุทุง ุฏุฑ ูุฑ ฺฉ ุงุฒ ูพุดูุงุฒูุง ูุงุฒู ุงุณุช ูุณุจุช ุจู ุฑูุน ุงุฑุงุฏ ุงูุฏุงู ฺฏุฑุฏุฏ.  
* ุฏุฑ ุตูุฑุช ฺฺฉ ุดุฏู ูพุดูุงุฒูุง ุงุฒ ุดูุง ูพุฑุณุฏู ูโุดูุฏ ฺฉู ุขุง Passwall2 ุง AmneziaWG ุฑุง ูุตุจ ฺฉูุฏ (ูพุงุณุฎ ุจุง `y/n`).

---

## ฺฏุฒููโูุง ุงุฎุชุงุฑ (ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุจุฏูู ูพุฑุณุด)

* `--passwall2`: ูุตุจ Passwall2 ุจุฏูู ูพุฑุณุด.
* `--ir`: ูุนุงูโุณุงุฒ ูุณุชโูุง ุฌุบุฑุงูุง ุงุฑุงู (ุชูุตู ุจุฑุง ฺฉุงุฑุจุฑุงู ุงุฑุงู).
* `--rebind`: ุงุฌุงุฒู ุฏุงุฏู ุจู ุณุงุชูุง ุงุฑุงู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุถุนู ุงููุช rebind.
* `--amneziawg`: ูุตุจ AmneziaWG ุจุฏูู ูพุฑุณุด.

### ูุซุงู:
ูุตุจ ุงููุฒุง ูุงุฑฺฏุงุฑุฏ ุจููุฑุงู pbr ู ุขุฏุฑุณูุง ุขู ูพ ุงุฑุงู ููุงุณุจ ุจุฑุง ููู ุฑูุชุฑูุง ุฏุงุฑุง ูพุดุชุจุงู ุงุฒ ุขุฎุฑู ูุณุฎู OpenWrt:
```sh
cd /tmp/ && wget -O install.sh https://github.com/iranopenwrt/auto/releases/latest/download/install.sh && sh install.sh --amnezia --pbr --ir
```

ูุตุจ ูพุณูุงู ฒ ุจููุฑุงู ูุณุช ูุจุณุงุชูุง ู ุขุฏุฑุณูุง ุขูพ ุงุฑุงู ููุงุณุจ ุจุฑุง ุฑูุชุฑูุง ุฏุงุฑุง ุญุฏุงูู ูพุฑุฏุงุฒูุฏู Arm 64 ุฏู ูุณุชู ุง ู ฒตถ ูฺฏุงุจุงุช ุฑู(โตฑฒ ูฺฏ ุฑู ุจู ุจุงูุง ูพุดููุงุฏ ูุดูุฏ):
```sh
cd /tmp/ && wget -O install.sh https://github.com/iranopenwrt/auto/releases/latest/download/install.sh && sh install.sh --passwall2 --ir --rebind
```
 ูุตุจ ูพุณูุงูฒ ุจููุฑุงู ูุณุช ูุจุณุงุชูุง ู ุขุฏุฑุณูุง ุขูพ ุงุฑุงู ู AmneziaWG. ุจุฑุง ุงุณุชูุงุฏู ุชุฑฺฉุจ ุงุฒ ูพุฑูุชูฺฉู ูุง ุญุฏุงูู ูพุฑุฏุงุฒูุฏู Arm 64 ฺูุงุฑ ูุณุชู ุง ู ฑ ฺฏฺฏุงุจุงุช ุฑู:

```sh
cd /tmp/ && wget -O install.sh https://github.com/iranopenwrt/auto/releases/latest/download/install.sh && sh install.sh --passwall2 --ir --rebind --amneziawg
```
---

## ูพุณ ุงุฒ ูุตุจ

* ุจู ุฑุงุจุท ูุจ **LuCI** ุจุฑูุฏ (ูุนูููุงู ุฏุฑ `192.168.1.1`).
* ุฏุฑ ุจุฎุด **Services > Passwall2** ุง **AmneziaWG**ุ ุชูุธูุงุช ุฎูุฏ ุฑุง ูพฺฉุฑุจูุฏ ฺฉูุฏ.
* ุฏุฑ ุตูุฑุช ูุงุฒุ ุฑูุชุฑ ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ:

  ```sh
  reboot
  ```

---

## ุฎุฑูุฌ ุงุณฺฉุฑูพุช ู ุฑูุน ูุดฺฉูุงุช

ุงุณฺฉุฑูพุช ุฎุฑูุฌโูุง ุฑูฺฏ ู ูุงุถุญ ุชููุฏ ูโฺฉูุฏ:

* `[INFO]` (ุขุจ): ุงุทูุงุนุงุช ูุนูููุ ูุดฺฉู ูุณุช.
* `[SUCCESS]` (ุณุจุฒ): ููููุช ุฏุฑ ุนููุงุช.
* `[WARNING]` (ุฒุฑุฏ): ูุดุฏุงุฑ (ูุซูุงู ูุณุฎู OpenWrt ูุฏู ุงุณุช).
* `[ERROR]` (ูุฑูุฒ): ุฎุทุง (ุงุณฺฉุฑูพุช ูุชููู ูโุดูุฏ).

### ุฎุทุงูุง ุฑุงุฌ ู ุฑุงูโุญูโูุง:

* **No internet connectivity** โ ุจุฑุฑุณ ุงุชุตุงู ุงูุชุฑูุช (`ping 8.8.8.8`).
* **DNS resolution failed** โ ุจุฑุฑุณ ุนููฺฉุฑุฏ ุฏ ุงู ุงุณ ุฏุฑ ููุณ.
* **GitHub connectivity failed** โ ุงุฑุงุฏ ุฏุณุชุฑุณ ุจู ฺฏุชูุงุจุ .
* **Failed to access package** โ ุงุฑุงุฏ ุฏุณุชุฑุณ ุจู ุฑูพููุง

---

## ููููู ุฎุฑูุฌ ูููู

```text
[INFO] Starting pre-installation checks...
[INFO] Checking internet connectivity by pinging 8.8.8.8...
PING 8.8.8.8 (8.8.8.8): 56 data bytes
...
[SUCCESS] Internet connectivity test passed.
...
[SUCCESS] All requested installations completed.
```

---

## ูุญุฏูุฏุชโูุง ู ูฺฉุงุช

* ุงู ุงุณฺฉุฑูพุช ููุท ุฑู **OpenWrt** ฺฉุงุฑ ูโฺฉูุฏ (ูู ุฑู ูุฑูโูุฑ ุงุตู ุฑูุชุฑูุง ฺฉุงุฑุฎุงููโุง).
* ุจุนุฏ ุงุฒ ูุตุจุ ุญุชูุงู ุจุฑุง ุงููุช ูพุณูุฑุฏ ูู ุชูุธู ฺฉูุฏ.
* ูุทูุฆู ุดูุฏ ูุญุฏูุฏู ุข ูพ ุฑูุชุฑ OpenWRT ุจุง ููุฏู ูุชุตู ุจู ุขู **ูุชูุงูุช** ุจุงุดุฏ

---

## ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุงุณูุณ **GNU General Public License v2** ููุชุดุฑ ุดุฏู ุงุณุช.
ุฌุฒุฆุงุช ุฏุฑ ูุงูโูุง ุงุณฺฉุฑูพุช ููุฌูุฏ ุงุณุช.

---

ุงฺฏุฑ ูุดฺฉู ุฏุงุดุชุฏุ ูุทูุงู ุฏุฑ ุจุฎุด **Issues** ุงู ุฑูพู ฺฏุฒุงุฑุด ุฏูุฏ.
ูููู ุจุงุดุฏ! ๐
